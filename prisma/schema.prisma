generator client {
  provider = "cargo prisma"
  output   = "../domains/src/infrastructures/db/prisma.rs"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          String  @id @default(cuid())
  displayName String
  email       String?
}

model WishList {
  id              String            @id
  url             String            @unique
  scrapedAt       BigInt
  title           String
  EbookInWishList EbookInWishList[]
}

model Ebook {
  id              String            @id
  url             String            @unique
  snapshots       EbookSnapshot[]
  EbookInWishList EbookInWishList[]
}

model EbookInWishList {
  wish_list   WishList @relation(fields: [wishListId], references: [id])
  wishListId String
  ebook      Ebook    @relation(fields: [ebookId], references: [id])
  ebookId    String

  @@id([wishListId, ebookId])
}

model EbookSnapshot {
  id           String @id @default(cuid())
  ebook        Ebook  @relation(fields: [ebookId], references: [id])
  ebookId      String
  title        String
  scrapedAt    Int
  thumbnailUrl String
  price        Int
  discount     Int
  discountRate Int
  points       Int
  pointsRate   Int
}
